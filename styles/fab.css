/**
 * The Tribunal - FAB Styles
 * Floating Action Buttons - DE Style
 * 
 * Color Theming:
 * - Main FAB (ID Card): Health orange #f3650b
 * - Investigation FAB (Magnifying Glass): Morale teal #0e7989 at rest
 * - Discovery pulse: DE yellow #dac66c
 * - Scanning/Success: DE green #45bb7e
 * 
 * UPDATED: Added sparkle animations (moved from discovery.css)
 */

/* ═══════════════════════════════════════════════════════════════
   MAIN FAB (ID Card) - Health Orange Theme
   ═══════════════════════════════════════════════════════════════ */

.ie-fab {
    position: fixed;
    z-index: 9998;
    width: 52px;
    height: 52px;
    border-radius: 4px;
    background: var(--ie-bg-secondary);
    border: 2px solid #f3650b40; /* Subtle orange border */
    color: var(--ie-text-secondary);
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    box-shadow: var(--ie-shadow);
    transition: all 0.2s ease;
    font-size: 22px;
}

.ie-fab::before {
    content: '';
    position: absolute;
    top: -6px;
    left: 50%;
    transform: translateX(-50%);
    width: 20px;
    height: 3px;
    background: #f3650b60; /* Orange top accent bar */
}

.ie-fab:hover {
    border-color: #f3650b;
    color: #f3650b;
    box-shadow: 0 0 20px rgba(243, 101, 11, 0.4);
}

.ie-fab:hover::before {
    background: #f3650b;
}

/* Main FAB card icon styling */
.ie-fab-icon {
    font-size: 22px;
    line-height: 1;
    transition: transform 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
}

.ie-fab-icon i {
    color: #f3650b; /* Health orange icon */
    transition: transform 0.3s ease, color 0.2s ease;
}

.ie-fab:hover .ie-fab-icon i {
    color: #ff7a2a; /* Brighter orange on hover */
    transform: scale(1.1);
}

.ie-fab.ie-fab-active .ie-fab-icon i {
    color: var(--ie-bg-primary);
}

/* Peek-up animation for card icon */
@keyframes ie-card-peek {
    0% { transform: translateY(0); }
    25% { transform: translateY(-6px); }
    50% { transform: translateY(-3px); }
    75% { transform: translateY(-5px); }
    100% { transform: translateY(0); }
}

.ie-fab.ie-fab-loading .ie-fab-icon {
    animation: ie-card-peek 0.8s ease-in-out;
}

.ie-fab.ie-fab-loading .ie-fab-icon i {
    color: #f3650b;
}

/* Continuous subtle idle animation when panel is open */
.ie-fab.ie-fab-active .ie-fab-icon {
    animation: ie-card-idle 3s ease-in-out infinite;
}

@keyframes ie-card-idle {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-2px); }
}

.ie-fab-active {
    background: #f3650b;
    border-color: #f3650b;
    color: var(--ie-bg-primary);
}

.ie-fab-active::before {
    background: #ff9040;
}

.ie-fab-disabled {
    opacity: 0.4;
    border-color: var(--ie-border);
    color: var(--ie-text-muted);
}

.ie-fab-disabled:hover {
    transform: none;
    border-color: var(--ie-border);
    color: var(--ie-text-muted);
    box-shadow: var(--ie-shadow);
}


/* ═══════════════════════════════════════════════════════════════
   INVESTIGATION FAB (Magnifying Glass) - Morale Teal + DE Flavor
   ═══════════════════════════════════════════════════════════════ */

/* Investigation FAB disabled state */
.ie-thought-fab-disabled {
    opacity: 0.4;
    border-color: var(--ie-border);
    pointer-events: none;
}

.ie-thought-fab-disabled:hover {
    transform: none;
    box-shadow: none;
}

.ie-thought-fab {
    position: fixed;
    z-index: 9997;
    width: 52px;
    height: 52px;
    border-radius: 4px;
    background: var(--ie-bg-secondary);
    border: 2px solid #0e798940; /* Subtle teal border */
    color: var(--ie-text-secondary);
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    box-shadow: var(--ie-shadow);
    transition: all 0.2s ease;
}

/* Top accent bar */
.ie-thought-fab::before {
    content: '';
    position: absolute;
    top: -6px;
    left: 50%;
    transform: translateX(-50%);
    width: 20px;
    height: 3px;
    background: #0e798960; /* Teal top accent bar */
    transition: background 0.2s ease;
}

.ie-thought-fab:hover {
    border-color: #0e7989;
    color: #0e7989;
    box-shadow: 0 0 20px rgba(14, 121, 137, 0.4);
}

.ie-thought-fab:hover::before {
    background: #0e7989;
}

.ie-thought-fab:active {
    transform: scale(0.95);
}

.ie-thought-fab-icon {
    font-size: 22px;
    transition: transform 0.2s ease;
    position: relative;
}

.ie-thought-fab:hover .ie-thought-fab-icon {
    transform: scale(1.1);
}

/* Icon styling - Morale teal at rest */
.ie-thought-fab-icon i {
    color: #0e7989; /* Morale teal */
    transition: color 0.3s ease, transform 0.3s ease;
}

/* Hover state - brighter teal */
.ie-thought-fab:hover .ie-thought-fab-icon i {
    color: #12a0b5;
    transform: scale(1.1);
}

/* Active state (modal open) - full teal */
.ie-thought-fab.ie-fab-active {
    background: #0e7989;
    border-color: #0e7989;
}

.ie-thought-fab.ie-fab-active::before {
    background: #15b0c5;
}

.ie-thought-fab.ie-fab-active .ie-thought-fab-icon i {
    color: var(--ie-bg-primary);
}


/* ═══════════════════════════════════════════════════════════════
   INVESTIGATION FAB - DE Flavor Animations (Yellow/Green)
   ═══════════════════════════════════════════════════════════════ */

/* Notification badge - DE yellow */
.ie-thought-fab-badge {
    position: absolute;
    top: -4px;
    right: -4px;
    min-width: 18px;
    height: 18px;
    background: #dac66c; /* DE yellow */
    border-radius: 50%;
    color: #1a1a20;
    font-size: 11px;
    font-weight: 700;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0 4px;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
    animation: ie-badge-pulse 2s infinite;
}

.ie-thought-fab-badge:empty,
.ie-thought-fab-badge[data-count="0"] {
    display: none;
}

@keyframes ie-badge-pulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.1); }
}

/* Pulse animation when new discoveries - DE yellow glow */
.ie-thought-fab-pulse {
    animation: ie-fab-glow 1.5s ease-in-out infinite;
}

@keyframes ie-fab-glow {
    0%, 100% { 
        box-shadow: 
            0 4px 12px rgba(0, 0, 0, 0.4),
            0 0 0 0 rgba(218, 198, 108, 0);
    }
    50% { 
        box-shadow: 
            0 4px 12px rgba(0, 0, 0, 0.4),
            0 0 0 8px rgba(218, 198, 108, 0.3);
    }
}

/* Has discoveries - icon pulsing DE yellow */
.ie-thought-fab-pulse .ie-thought-fab-icon i {
    animation: ie-discovery-glow 2s ease-in-out infinite;
}

@keyframes ie-discovery-glow {
    0%, 100% { color: #0e7989; }
    50% { color: #dac66c; filter: drop-shadow(0 0 6px rgba(218, 198, 108, 0.5)); }
}

/* Scanning state - DE green */
.ie-thought-fab.ie-scanning {
    background: #0e7989;
    border-color: #0e7989;
}

.ie-thought-fab.ie-scanning::before {
    background: #15b0c5;
}

.ie-thought-fab.ie-scanning .ie-thought-fab-icon i {
    color: #45bb7e; /* DE green */
    animation: ie-icon-scan-pulse 1s ease-in-out infinite;
}

@keyframes ie-icon-scan-pulse {
    0%, 100% { opacity: 0.7; transform: scale(1); }
    50% { opacity: 1; transform: scale(1.15); }
}

/* Success flash - DE green */
.ie-thought-fab.ie-scan-success .ie-thought-fab-icon i {
    color: #45bb7e; /* DE green */
    animation: ie-icon-success-flash 0.5s ease-out;
}

@keyframes ie-icon-success-flash {
    0% { color: #45bb7e; transform: scale(1.2); }
    100% { color: #0e7989; transform: scale(1); }
}

/* Modal header icon */
.ie-discovery-title-icon i {
    color: #0e7989;
}

/* Empty state icon enhancement */
.ie-discovery-empty i.fa-search {
    font-size: 2rem;
    opacity: 0.5;
    margin-bottom: 8px;
}


/* ═══════════════════════════════════════════════════════════════
   SPARKLE/TWINKLE ANIMATION FOR SCANNING
   (Moved from discovery.css - belongs with FAB styles)
   ═══════════════════════════════════════════════════════════════ */

/* Sparkle pseudo-elements */
.ie-thought-fab.ie-scanning::after {
    content: '✦';
    position: absolute;
    font-size: 10px;
    color: #ffd54f;
    animation: ie-sparkle-1 0.6s ease-in-out infinite;
    top: 8px;
    right: 8px;
    pointer-events: none;
}

.ie-thought-fab.ie-scanning .ie-thought-fab-icon::before {
    content: '✦';
    position: absolute;
    font-size: 8px;
    color: #ffd54f;
    animation: ie-sparkle-2 0.6s ease-in-out 0.2s infinite;
    bottom: -2px;
    left: -4px;
    pointer-events: none;
}

.ie-thought-fab.ie-scanning .ie-thought-fab-icon::after {
    content: '✦';
    position: absolute;
    font-size: 6px;
    color: #fff;
    animation: ie-sparkle-3 0.6s ease-in-out 0.4s infinite;
    top: -2px;
    left: 50%;
    pointer-events: none;
}

@keyframes ie-sparkle-1 {
    0%, 100% { opacity: 0; transform: scale(0.5); }
    50% { opacity: 1; transform: scale(1.2); }
}

@keyframes ie-sparkle-2 {
    0%, 100% { opacity: 0; transform: scale(0.5) rotate(0deg); }
    50% { opacity: 1; transform: scale(1) rotate(20deg); }
}

@keyframes ie-sparkle-3 {
    0%, 100% { opacity: 0; transform: scale(0.5); }
    50% { opacity: 0.8; transform: scale(1.1); }
}

/* Icon glow during scanning */
.ie-thought-fab.ie-scanning .ie-thought-fab-icon i {
    color: #ffd54f;
    filter: drop-shadow(0 0 4px #ffd54f80);
    animation: ie-sparkle-icon-glow 0.8s ease-in-out infinite;
}

@keyframes ie-sparkle-icon-glow {
    0%, 100% { filter: drop-shadow(0 0 4px #ffd54f40); }
    50% { filter: drop-shadow(0 0 8px #ffd54f80); }
}

/* ═══════════════════════════════════════════════════════════════
   QUICK SCAN BUTTON (Mini magnifier in corner)
   ═══════════════════════════════════════════════════════════════ */

.ie-quick-scan-btn {
    position: absolute;
    bottom: -4px;
    right: -4px;
    width: 22px;
    height: 22px;
    border-radius: 50%;
    background: #d0bd61;
    border: 2px solid var(--ie-bg-secondary);
    color: var(--ie-bg-primary);
    font-size: 10px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
    opacity: 0;
    transform: scale(0.8);
}

.ie-thought-fab:hover .ie-quick-scan-btn {
    opacity: 1;
    transform: scale(1);
}

.ie-quick-scan-btn:hover {
    background: #e8d48a;
    transform: scale(1.1);
}

/* ═══════════════════════════════════════════════════════════════
   SUCCESS BADGE (Shows after successful scan)
   ═══════════════════════════════════════════════════════════════ */

.ie-scan-success-badge {
    position: absolute;
    top: -8px;
    right: -8px;
    width: 24px;
    height: 24px;
    border-radius: 50%;
    background: var(--ie-success);
    color: white;
    font-size: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    animation: ie-success-pop 0.4s ease-out;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
}

@keyframes ie-success-pop {
    0% { transform: scale(0); opacity: 0; }
    50% { transform: scale(1.2); }
    100% { transform: scale(1); opacity: 1; }
}


/* ═══════════════════════════════════════════════════════════════
   DISCO BALL SVG ICON (Bottom Buttons)
   ═══════════════════════════════════════════════════════════════ */

.ie-disco-icon,
.ie-disco-ball-icon {
    width: 18px;
    height: 18px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
}

.ie-disco-icon svg,
.ie-disco-ball-icon svg {
    width: 100%;
    height: 100%;
    stroke: currentColor;
    fill: none;
    transition: transform 0.3s ease;
}

.ie-bottom-btn:hover .ie-disco-icon,
.ie-bottom-btn:hover .ie-disco-ball-icon svg {
    transform: rotate(15deg);
}

.ie-bottom-btn.ie-bottom-btn-active .ie-disco-icon,
.ie-bottom-btn.ie-bottom-btn-active .ie-disco-ball-icon svg {
    animation: ie-disco-spin 3s linear infinite;
}

@keyframes ie-disco-spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}


/* ═══════════════════════════════════════════════════════════════
   SUGGESTIONS FAB (Future Phase 5)
   ═══════════════════════════════════════════════════════════════ */

.ie-suggestions-fab {
    /* Inherits base .ie-fab styles */
}

.ie-suggestions-fab .ie-fab-icon i {
    color: #dac66c; /* DE yellow for lightbulb */
    transition: all 0.3s ease;
}

.ie-suggestions-fab:hover .ie-fab-icon i {
    color: #e8d48a;
    text-shadow: 0 0 10px rgba(218, 198, 108, 0.5);
    transform: scale(1.1);
}

/* Lightbulb "on" state when active */
.ie-suggestions-fab.ie-fab-active .ie-fab-icon i {
    color: #f0e0a0;
    text-shadow: 0 0 15px rgba(218, 198, 108, 0.8);
    animation: ie-bulb-glow 2s ease-in-out infinite;
}

@keyframes ie-bulb-glow {
    0%, 100% { text-shadow: 0 0 10px rgba(218, 198, 108, 0.5); }
    50% { text-shadow: 0 0 20px rgba(218, 198, 108, 0.9); }
}

/* Generating state */
.ie-suggestions-fab.ie-generating .ie-fab-icon i {
    animation: ie-bulb-pulse 0.8s ease-in-out infinite;
}

@keyframes ie-bulb-pulse {
    0%, 100% { opacity: 0.5; transform: scale(1); }
    50% { opacity: 1; transform: scale(1.15); }
}
