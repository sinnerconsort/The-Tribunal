/**
 * The Tribunal - Watch Component
 * Clipboard-clipped wristwatch with weather complication
 * REBUILD: Header-mounted time/weather display
 * 
 * Modes: Real time + weather OR RP context time + weather
 */

/* ═══════════════════════════════════════════════════════════════
   CSS VARIABLES
   ═══════════════════════════════════════════════════════════════ */

:root {
    /* Watch case colors */
    --watch-case: #8b7355;
    --watch-case-dark: #5a4a3a;
    --watch-case-light: #a08060;
    
    /* Watch dial */
    --watch-dial: #f5f0e6;
    --watch-dial-dark: #e8e0d0;
    
    /* Hands & accents */
    --watch-hands: #2a2420;
    --watch-accent: #c9a227;
    
    /* Clip colors */
    --clip-metal: #6a6055;
    --clip-metal-dark: #3a3530;
}

/* ═══════════════════════════════════════════════════════════════
   WATCH CONTAINER
   ═══════════════════════════════════════════════════════════════ */

.tribunal-watch {
    position: relative;
    display: flex;
    flex-direction: column;
    align-items: center;
    flex-shrink: 0;
}

/* ═══════════════════════════════════════════════════════════════
   CLIPBOARD CLIP (holds the watch)
   ═══════════════════════════════════════════════════════════════ */

.watch-clip {
    position: relative;
    width: 50px;
    height: 22px;
    background: linear-gradient(180deg, 
        var(--clip-metal) 0%, 
        #4a4540 20%,
        var(--clip-metal-dark) 50%,
        #4a4540 80%,
        #5a5550 100%
    );
    border-radius: 4px 4px 2px 2px;
    box-shadow: 
        0 2px 4px rgba(0, 0, 0, 0.4),
        inset 0 1px 0 rgba(255, 255, 255, 0.1);
    margin-bottom: -5px;
    z-index: 2;
}

/* Clip opening */
.watch-clip::before {
    content: '';
    position: absolute;
    top: 5px;
    left: 50%;
    transform: translateX(-50%);
    width: 30px;
    height: 4px;
    background: linear-gradient(180deg, #2a2520 0%, var(--clip-metal-dark) 100%);
    border-radius: 2px;
}

/* ═══════════════════════════════════════════════════════════════
   WATCH CASE
   ═══════════════════════════════════════════════════════════════ */

.watch-case {
    width: 42px;
    height: 42px;
    border-radius: 50%;
    background: linear-gradient(135deg, 
        var(--watch-case-light) 0%,
        var(--watch-case) 30%,
        var(--watch-case-dark) 70%,
        var(--watch-case) 100%
    );
    padding: 3px;
    box-shadow: 
        0 3px 6px rgba(0, 0, 0, 0.4),
        0 1px 3px rgba(0, 0, 0, 0.3),
        inset 0 1px 2px rgba(255, 255, 255, 0.2);
    position: relative;
}

/* Inner bezel */
.watch-bezel {
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background: linear-gradient(180deg, 
        #5a4a3a 0%, 
        #4a3a2a 50%,
        #5a4a3a 100%
    );
    padding: 2px;
}

/* ═══════════════════════════════════════════════════════════════
   WATCH DIAL (face)
   ═══════════════════════════════════════════════════════════════ */

.watch-dial {
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background: radial-gradient(ellipse at 30% 30%, 
        #faf8f2 0%,
        var(--watch-dial) 40%,
        var(--watch-dial-dark) 100%
    );
    position: relative;
    overflow: hidden;
}

/* Hour markers (12, 3, 6, 9 only for small size) */
.watch-dial::after {
    content: '';
    position: absolute;
    inset: 2px;
    border-radius: 50%;
    background: 
        linear-gradient(180deg, #3a3530 0%, #3a3530 100%) no-repeat 50% 0% / 2px 3px,
        linear-gradient(90deg, #3a3530 0%, #3a3530 100%) no-repeat 100% 50% / 3px 2px,
        linear-gradient(180deg, #3a3530 0%, #3a3530 100%) no-repeat 50% 100% / 2px 3px,
        linear-gradient(90deg, #3a3530 0%, #3a3530 100%) no-repeat 0% 50% / 3px 2px;
}

/* ═══════════════════════════════════════════════════════════════
   WEATHER COMPLICATION (subdial at top)
   ═══════════════════════════════════════════════════════════════ */

.watch-weather {
    position: absolute;
    top: 4px;
    left: 50%;
    transform: translateX(-50%);
    width: 14px;
    height: 8px;
    background: linear-gradient(180deg, #1a3050 0%, #2a4060 100%);
    border-radius: 8px 8px 0 0;
    display: flex;
    align-items: center;
    justify-content: center;
    border: 1px solid rgba(60, 50, 40, 0.5);
    border-bottom: none;
    z-index: 1;
}

.watch-weather i {
    font-size: 0.35rem;
    color: #a0b0c0;
}

/* Weather states */
.watch-weather.clear-day i { 
    color: #f0d040; 
    text-shadow: 0 0 3px rgba(240, 200, 60, 0.5); 
}

.watch-weather.clear-night i { 
    color: #e0e8f0; 
    text-shadow: 0 0 3px rgba(220, 230, 240, 0.5); 
}

.watch-weather.cloudy i { color: #8090a0; }
.watch-weather.rainy i { color: #6080b0; }
.watch-weather.stormy i { color: #7070a0; }
.watch-weather.snowy i { color: #c0d0e0; }
.watch-weather.foggy i { color: #909090; }

/* ═══════════════════════════════════════════════════════════════
   DATE WINDOW (bottom)
   ═══════════════════════════════════════════════════════════════ */

.watch-date {
    position: absolute;
    bottom: 6px;
    left: 50%;
    transform: translateX(-50%);
    background: #fff;
    border: 1px solid #c0b8a8;
    padding: 0 2px;
    font-size: 0.3rem;
    font-weight: 600;
    color: #2a2420;
    letter-spacing: 0.3px;
    font-family: var(--ie-font-body, 'IBM Plex Mono', monospace);
    z-index: 1;
}

/* ═══════════════════════════════════════════════════════════════
   WATCH HANDS
   ═══════════════════════════════════════════════════════════════ */

.watch-hands {
    position: absolute;
    inset: 0;
    display: flex;
    align-items: center;
    justify-content: center;
}

.watch-hand {
    position: absolute;
    bottom: 50%;
    left: 50%;
    transform-origin: bottom center;
    background: var(--watch-hands);
    border-radius: 1px;
    transition: transform 0.3s cubic-bezier(0.4, 2.08, 0.55, 0.44);
}

/* Hour hand */
.watch-hand-hour {
    width: 2.5px;
    height: 10px;
    margin-left: -1.25px;
    z-index: 2;
    background: linear-gradient(180deg, #2a2420 0%, #3a3430 100%);
}

/* Minute hand */
.watch-hand-minute {
    width: 1.5px;
    height: 13px;
    margin-left: -0.75px;
    z-index: 3;
    background: linear-gradient(180deg, #2a2420 0%, #3a3430 100%);
}

/* Second hand (optional, for real-time mode) */
.watch-hand-second {
    width: 0.5px;
    height: 14px;
    margin-left: -0.25px;
    background: var(--watch-accent);
    z-index: 4;
    transition: none; /* Smooth tick */
}

/* Hide second hand in RP mode */
.tribunal-watch.rp-mode .watch-hand-second {
    display: none;
}

/* Center pin */
.watch-center {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 4px;
    height: 4px;
    background: radial-gradient(circle at 30% 30%, #4a4440 0%, #2a2420 100%);
    border-radius: 50%;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
    z-index: 5;
}

/* ═══════════════════════════════════════════════════════════════
   CRACKED GLASS EFFECT
   ═══════════════════════════════════════════════════════════════ */

.watch-crack {
    position: absolute;
    top: 15%;
    left: 50%;
    width: 45%;
    height: 65%;
    background: linear-gradient(135deg,
        transparent 0%, transparent 44%,
        rgba(60, 50, 40, 0.35) 45%, rgba(60, 50, 40, 0.35) 47%,
        transparent 48%, transparent 51%,
        rgba(60, 50, 40, 0.25) 52%, rgba(60, 50, 40, 0.25) 53%,
        transparent 54%
    );
    pointer-events: none;
    z-index: 6;
}

/* Toggle crack visibility */
.tribunal-watch.pristine .watch-crack {
    display: none;
}

/* ═══════════════════════════════════════════════════════════════
   MODE INDICATOR (real vs RP time)
   ═══════════════════════════════════════════════════════════════ */

.watch-mode-indicator {
    position: absolute;
    bottom: -14px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 0.4rem;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    color: var(--ie-text-muted, #8a8580);
    white-space: nowrap;
    opacity: 0;
    transition: opacity 0.2s;
}

.tribunal-watch:hover .watch-mode-indicator {
    opacity: 1;
}

.tribunal-watch.rp-mode .watch-mode-indicator::before {
    content: '⚙ RP';
}

.tribunal-watch.real-mode .watch-mode-indicator::before {
    content: '◷ REAL';
}

/* ═══════════════════════════════════════════════════════════════
   CLICK TO TOGGLE (cursor hint)
   ═══════════════════════════════════════════════════════════════ */

.tribunal-watch {
    cursor: pointer;
}

.tribunal-watch:hover .watch-case {
    box-shadow: 
        0 3px 6px rgba(0, 0, 0, 0.4),
        0 1px 3px rgba(0, 0, 0, 0.3),
        inset 0 1px 2px rgba(255, 255, 255, 0.2),
        0 0 0 2px rgba(212, 165, 116, 0.3);
}

/* ═══════════════════════════════════════════════════════════════
   LARGER SIZE VARIANT (for standalone display)
   ═══════════════════════════════════════════════════════════════ */

.tribunal-watch.watch-lg .watch-clip {
    width: 80px;
    height: 35px;
    margin-bottom: -8px;
}

.tribunal-watch.watch-lg .watch-clip::before {
    width: 50px;
    height: 6px;
    top: 8px;
}

.tribunal-watch.watch-lg .watch-case {
    width: 90px;
    height: 90px;
    padding: 4px;
}

.tribunal-watch.watch-lg .watch-weather {
    width: 28px;
    height: 14px;
    top: 14px;
}

.tribunal-watch.watch-lg .watch-weather i {
    font-size: 0.5rem;
}

.tribunal-watch.watch-lg .watch-date {
    bottom: 16px;
    font-size: 0.4rem;
    padding: 1px 4px;
}

.tribunal-watch.watch-lg .watch-hand-hour {
    width: 3px;
    height: 18px;
    margin-left: -1.5px;
}

.tribunal-watch.watch-lg .watch-hand-minute {
    width: 2px;
    height: 26px;
    margin-left: -1px;
}

.tribunal-watch.watch-lg .watch-hand-second {
    width: 1px;
    height: 28px;
    margin-left: -0.5px;
}

.tribunal-watch.watch-lg .watch-center {
    width: 6px;
    height: 6px;
}

/* ═══════════════════════════════════════════════════════════════
   ANIMATION - Tick (for second hand)
   ═══════════════════════════════════════════════════════════════ */

@keyframes watch-tick {
    0%, 100% { transform: rotate(var(--second-deg, 0deg)); }
}

/* ═══════════════════════════════════════════════════════════════
   ANIMATION - Gentle pulse for RP mode
   ═══════════════════════════════════════════════════════════════ */

.tribunal-watch.rp-mode .watch-dial::before {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: 50%;
    background: radial-gradient(circle at center, rgba(212, 165, 116, 0.1) 0%, transparent 70%);
    animation: watch-rp-pulse 4s ease-in-out infinite;
    pointer-events: none;
}

@keyframes watch-rp-pulse {
    0%, 100% { opacity: 0; }
    50% { opacity: 1; }
}

/* ═══════════════════════════════════════════════════════════════
   HEADER INTEGRATION
   When watch is in .ie-header-top
   ═══════════════════════════════════════════════════════════════ */

.ie-header-top .watch-mode-indicator {
    display: none; /* Hide mode indicator in header - too cramped */
}

/* Show mode indicator on hover in header */
.ie-header-top .tribunal-watch:hover .watch-mode-indicator {
    display: block;
    bottom: -16px;
}
