/**
 * The Tribunal - Voices Output
 * Voice display styling
 * REBUILD: Napkin / Bar Receipt aesthetic
 */

/* ═══════════════════════════════════════════════════════════════
   NAPKIN PAPER VARIABLES
   ═══════════════════════════════════════════════════════════════ */

:root {
    /* Napkin tones */
    --napkin-white: #f8f5f0;
    --napkin-cream: #f0ebe3;
    --napkin-shadow: #e5ddd2;
}

/* ═══════════════════════════════════════════════════════════════
   VOICES TAB - FULL HEIGHT NAPKIN PAPER
   ═══════════════════════════════════════════════════════════════ */

.ie-tab-content[data-tab-content="voices"] {
    display: flex;
    flex-direction: column;
    overflow: hidden;
    padding: 0;
    background: transparent;
}

/* The voices section becomes the napkin - fills all space */
.ie-tab-content[data-tab-content="voices"] .ie-voices-section {
    flex: 1;
    display: flex;
    flex-direction: column;
    background-color: var(--napkin-cream);
    /* Napkin texture - soft fibrous pattern */
    background-image: 
        url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='napkin'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23napkin)'/%3E%3C/svg%3E"),
        /* Subtle diagonal weave pattern */
        repeating-linear-gradient(
            45deg,
            transparent,
            transparent 2px,
            rgba(200, 190, 175, 0.1) 2px,
            rgba(200, 190, 175, 0.1) 4px
        ),
        /* Slight color variation */
        radial-gradient(ellipse at 30% 70%, rgba(220, 200, 170, 0.15) 0%, transparent 50%);
    background-blend-mode: overlay, normal, normal;
    position: relative;
    padding: 16px;
    margin: 0;
    margin-left: -12px;
    margin-right: 10px;
    padding-left: 28px;
    overflow-y: auto;
    /* Soft shadow like paper on surface */
    box-shadow: 
        2px 3px 8px rgba(0, 0, 0, 0.15),
        inset 0 0 30px rgba(0, 0, 0, 0.02);
}

/* Crinkle/fold marks */
.ie-tab-content[data-tab-content="voices"] .ie-voices-section::before {
    content: '';
    position: absolute;
    inset: 0;
    background: 
        /* Diagonal fold line */
        linear-gradient(135deg, 
            transparent 30%, 
            rgba(0, 0, 0, 0.015) 30.5%, 
            rgba(0, 0, 0, 0.015) 31%, 
            transparent 31.5%
        ),
        /* Another subtle crease */
        linear-gradient(-45deg, 
            transparent 60%, 
            rgba(255, 255, 255, 0.2) 60.2%, 
            rgba(0, 0, 0, 0.01) 60.5%, 
            transparent 61%
        );
    pointer-events: none;
    z-index: 1;
}

/* Bar name watermark - VERY faint */
.ie-tab-content[data-tab-content="voices"] .ie-voices-section::after {
    content: 'THE WHIRLING-IN-RAGS';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) rotate(-20deg);
    font-family: var(--ie-font-header);
    font-size: 1.6rem;
    font-weight: 700;
    letter-spacing: 4px;
    color: rgba(180, 160, 140, 0.04);
    white-space: nowrap;
    pointer-events: none;
    z-index: 0;
}

/* ═══════════════════════════════════════════════════════════════
   SECTION HEADER - Match ledger style
   ═══════════════════════════════════════════════════════════════ */

.ie-tab-content[data-tab-content="voices"] .ie-section-header {
    background: transparent;
    border-bottom: 1px dashed rgba(100, 90, 80, 0.2);
    padding-bottom: 8px;
    margin-bottom: 12px;
    position: relative;
    z-index: 2;
}

.ie-tab-content[data-tab-content="voices"] .ie-section-header span {
    color: var(--ledger-ink-dark, #5a5045);
    font-size: 11px;
    letter-spacing: 2px;
}

/* Add the // prefix to match ledger */
.ie-tab-content[data-tab-content="voices"] .ie-section-header span::before {
    content: '// ';
    opacity: 0.5;
}

/* ═══════════════════════════════════════════════════════════════
   VOICES CONTAINER
   ═══════════════════════════════════════════════════════════════ */

.ie-voices-container {
    flex: 1;
    overflow-y: visible;
    padding-bottom: 16px;
    position: relative;
    z-index: 2;
}

/* Scrollable variant if needed */
.ie-voices-container.ie-scrollable {
    max-height: 400px;
    overflow-y: auto;
    padding-bottom: 20px;
    scroll-behavior: smooth;
}

.ie-voices-empty {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 8px;
    padding: 40px 30px;
    color: var(--ledger-ink-faded, #8a8075);
    font-style: italic;
    font-size: 13px;
}

.ie-voices-empty i {
    font-size: 24px;
    opacity: 0.4;
    color: var(--ledger-ink-faded, #8a8075);
}

/* ═══════════════════════════════════════════════════════════════
   VOICE CARDS - Scribbled Notes on Napkin
   ═══════════════════════════════════════════════════════════════ */

.ie-voice-line,
.ie-voice-item {
    background: rgba(255, 255, 255, 0.4);
    border-left: 3px solid;
    border-radius: 0;
    padding: 10px 12px;
    margin-bottom: 10px;
    position: relative;
    /* Slight paper lift effect */
    box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.08);
}

.ie-voice-line:last-child,
.ie-voice-item:last-child {
    margin-bottom: 0;
}

/* Remove the dark gradient overlay - napkin is light */
.ie-voice-line::before,
.ie-voice-item::before {
    display: none;
}

/* Underline effect like hasty scribble */
.ie-voice-line::after,
.ie-voice-item::after {
    content: '';
    position: absolute;
    bottom: 8px;
    left: 12px;
    right: 12px;
    height: 1px;
    background: repeating-linear-gradient(
        90deg,
        rgba(100, 90, 80, 0.1) 0px,
        rgba(100, 90, 80, 0.1) 4px,
        transparent 4px,
        transparent 8px
    );
}

/* ═══════════════════════════════════════════════════════════════
   VOICE HEADER & SIGNATURE
   ═══════════════════════════════════════════════════════════════ */

.ie-voice-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 6px;
    flex-wrap: wrap;
    gap: 6px;
}

.ie-voice-signature {
    font-family: var(--ie-font-header);
    font-weight: 700;
    font-size: 10px;
    text-transform: uppercase;
    letter-spacing: 1.5px;
}

.ie-voice-content {
    font-size: 12px;
    line-height: 1.55;
    color: var(--ledger-ink-dark, #5a5045);
    word-wrap: break-word;
    overflow-wrap: break-word;
}

/* ═══════════════════════════════════════════════════════════════
   CHECK RESULTS (Dice rolls) - Receipt printout style
   ═══════════════════════════════════════════════════════════════ */

.ie-check-result {
    font-family: var(--ie-font-header);
    font-size: 9px;
    padding: 3px 8px;
    border-radius: 0;
    margin-bottom: 6px;
    display: inline-flex;
    align-items: center;
    gap: 5px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    border: 1px dashed;
}

.ie-die {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 18px;
    height: 18px;
    background: var(--napkin-white);
    border-radius: 2px;
    font-weight: bold;
    font-size: 10px;
    border: 1px solid rgba(100, 90, 80, 0.3);
    color: var(--ledger-ink-dark, #5a5045);
}

/* Success - green pen */
.ie-success,
.ie-check-result.ie-success {
    background: rgba(90, 130, 80, 0.15);
    color: #4a6a40;
    border-color: rgba(90, 130, 80, 0.4);
}

/* Failure - red pen */
.ie-fail,
.ie-failure,
.ie-check-result.ie-fail {
    background: rgba(160, 80, 70, 0.15);
    color: #8a4a42;
    border-color: rgba(160, 80, 70, 0.4);
}

/* Critical Success - circled emphatically */
.ie-crit-success,
.ie-critical-success {
    background: rgba(180, 150, 60, 0.25);
    color: #6a5a20;
    border-color: #a08830;
    border-width: 2px;
    border-style: solid;
}

/* Critical Failure - angry scribble */
.ie-crit-fail,
.ie-critical-failure {
    background: rgba(140, 50, 50, 0.2);
    color: #6a2a2a;
    border-color: #8a3a3a;
    border-width: 2px;
}

/* ═══════════════════════════════════════════════════════════════
   VOICE TYPE VARIANTS - Pen colors on napkin
   ═══════════════════════════════════════════════════════════════ */

/* Intellect voices - Blue ballpoint */
.ie-voice-int,
.ie-voice-intellect {
    border-left-color: #4a6a8a;
    background: rgba(74, 106, 138, 0.08);
}

.ie-voice-int .ie-voice-signature,
.ie-voice-intellect .ie-voice-signature {
    color: #3a5a7a;
}

/* Psyche voices - Purple ink */
.ie-voice-psy,
.ie-voice-psyche {
    border-left-color: #7a5a8a;
    background: rgba(122, 90, 138, 0.08);
}

.ie-voice-psy .ie-voice-signature,
.ie-voice-psyche .ie-voice-signature {
    color: #6a4a7a;
}

/* Physique voices - Red marker */
.ie-voice-fys,
.ie-voice-physique {
    border-left-color: #9a5a5a;
    background: rgba(154, 90, 90, 0.08);
}

.ie-voice-fys .ie-voice-signature,
.ie-voice-physique .ie-voice-signature {
    color: #8a4a4a;
}

/* Motorics voices - Amber/brown pen */
.ie-voice-mot,
.ie-voice-motorics {
    border-left-color: #8a7a4a;
    background: rgba(138, 122, 74, 0.08);
}

.ie-voice-mot .ie-voice-signature,
.ie-voice-motorics .ie-voice-signature {
    color: #7a6a3a;
}

/* ═══════════════════════════════════════════════════════════════
   SPECIAL VOICE TYPES
   ═══════════════════════════════════════════════════════════════ */

/* Ancient Reptilian Brain - smudged/old */
.ie-voice-ancient {
    background: rgba(80, 90, 80, 0.12);
    border-left-color: #5a6a5a;
    opacity: 0.9;
}

.ie-voice-ancient .ie-voice-content {
    color: var(--ledger-ink-faded, #8a8075);
}

/* Intrusive thoughts - hasty scrawl */
.ie-voice-intrusive {
    background: rgba(100, 70, 100, 0.1);
    border-left-color: #8a5a8a;
    transform: rotate(-0.5deg);
}

/* Object voices (Shivers-style) - ethereal */
.ie-voice-object {
    background: rgba(120, 110, 80, 0.1);
    border-left-color: #9a8a5a;
    font-style: italic;
}

/* Narrator voice - bold underlined */
.ie-voice-line.ie-narrator-voice,
.ie-voice-narrator {
    background: rgba(180, 140, 100, 0.15);
    border-left-width: 5px;
    border-left-color: #a07040;
}

.ie-voice-narrator .ie-voice-signature {
    text-decoration: underline;
    color: #8a6030;
}

/* ═══════════════════════════════════════════════════════════════
   MANUAL TRIGGER SECTION - ON THE NAPKIN
   ═══════════════════════════════════════════════════════════════ */

/* Hide the separate manual section container */
.ie-tab-content[data-tab-content="voices"] .ie-manual-section {
    display: none;
}

/* We'll put the button inside the voices section via JS, 
   but for now style it to work on napkin */
.ie-tab-content[data-tab-content="voices"] .ie-btn-trigger {
    background: rgba(180, 160, 140, 0.15);
    border: 1px dashed rgba(100, 90, 80, 0.3);
    color: var(--ledger-ink-dark, #5a5045);
    font-size: 11px;
    margin-top: auto;
    position: relative;
    z-index: 2;
}

.ie-tab-content[data-tab-content="voices"] .ie-btn-trigger:hover {
    background: rgba(180, 160, 140, 0.25);
    border-style: solid;
}

/* ═══════════════════════════════════════════════════════════════
   COFFEE/DRINK STAIN DECORATION
   ═══════════════════════════════════════════════════════════════ */

.napkin-stain {
    position: absolute;
    bottom: 15px;
    right: 20px;
    width: 45px;
    height: 40px;
    pointer-events: none;
    z-index: 1;
    background: 
        radial-gradient(ellipse at 50% 50%, 
            transparent 40%, 
            rgba(139, 90, 60, 0.04) 45%,
            rgba(139, 90, 60, 0.06) 50%,
            rgba(139, 90, 60, 0.03) 55%,
            transparent 60%
        );
    transform: rotate(-15deg);
    opacity: 0.7;
}

